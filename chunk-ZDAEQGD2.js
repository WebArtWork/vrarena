import{a as C}from"./chunk-UWDWWCS2.js";import{e as P}from"./chunk-QVDMXOLA.js";import{Ab as k,M as m,N as f,O as h,T as u,Z as y,Za as v,db as b,f as c,i as n,ib as g,rb as _,s as d,yb as w}from"./chunk-ML3SWCJJ.js";var S={formId:"cybersportgame",title:"Cybersportgame",components:[{name:"Text",key:"name",focused:!0,fields:[{name:"Placeholder",value:"fill cybersportgame title"},{name:"Label",value:"Title"}]},{name:"Text",key:"metaLink",fields:[{name:"Placeholder",value:"fill meta link"},{name:"Label",value:"Meta link"}]},{name:"Text",key:"trailer",fields:[{name:"Placeholder",value:"fill Trailer"},{name:"Label",value:"Trailer"}]},{name:"Html",key:"shortDescription",fields:[{name:"Placeholder",value:"fill cybersportgame short description"},{name:"Label",value:"Short Description"}]},{name:"Select",key:"type",fields:[{name:"Placeholder",value:"fill cybersportgame type"},{name:"Label",value:"Type"},{name:"Items",value:["FPS","RPG","Puzzle","Sports","Adventure","Horror","Simulation","Strategy","Other"]}]},{name:"Number",key:"playersMin",fields:[{name:"Placeholder",value:"fill players min"},{name:"Label",value:"Players min"}]},{name:"Number",key:"playersMax",fields:[{name:"Placeholder",value:"fill players max"},{name:"Label",value:"Players max"}]},{name:"Number",key:"duration",fields:[{name:"Placeholder",value:"fill duration in minutes"},{name:"Label",value:"Duration"}]},{name:"Number",key:"ageRating",fields:[{name:"Placeholder",value:"fill age rating"},{name:"Label",value:"Age rating"}]},{name:"Select",key:"platform",fields:[{name:"Placeholder",value:"select platform"},{name:"Label",value:"Platform"},{name:"Items",value:["Quest 3","PCVR","Cross-platform"]}]},{name:"Select",key:"difficulty",fields:[{name:"Placeholder",value:"select difficulty"},{name:"Label",value:"Difficulty"},{name:"Items",value:["Easy","Medium","Hard"]}]},{name:"Photo",key:"image",fields:[{name:"Label",value:"Image"}]},{name:"Text",key:"trailer",fields:[{name:"Placeholder",value:"fill trailer"},{name:"Label",value:"Trailer"}]},{name:"Number",key:"price",fields:[{name:"Placeholder",value:"fill price"},{name:"Label",value:"Price"}]},{name:"Date",key:"releaseDate",fields:[{name:"Placeholder",value:"fill release date"},{name:"Label",value:"Release date"}]},{name:"Text",key:"developer",fields:[{name:"Placeholder",value:"fill developer"},{name:"Label",value:"Developer"}]},{name:"Boolean",key:"isMultiplayer",fields:[{name:"Label",value:"Can be played with others (Multiplayer)"}]},{name:"Boolean",key:"isStanding",fields:[{name:"Label",value:"Can be played while standing"}]},{name:"Boolean",key:"isSitting",fields:[{name:"Label",value:"Can be played while sitting"}]},{name:"Number",key:"afterAge",fields:[{name:"Placeholder",value:"played after child age"},{name:"Label",value:"After child age"}]},{name:"Number",key:"maxPlayers",fields:[{name:"Placeholder",value:"max game players"},{name:"Label",value:"Max Players"}]},{name:"Html",key:"description",fields:[{name:"Placeholder",value:"fill cybersportgame description"},{name:"Label",value:"Description"}]}]};var L=(()=>{class l{constructor(r,t,e,o,p){this._cybersportgameService=r,this._translate=t,this._alert=e,this._form=o,this._core=p,this.columns=["name"],this.form=this._form.getForm("cybersportgame",S),this.config={paginate:this.setRows.bind(this),perPage:20,setPerPage:this._cybersportgameService.setPerPage.bind(this._cybersportgameService),allDocs:!1,create:()=>{this._form.modal(this.form,{label:"Create",click:(i,a)=>c(this,null,function*(){a(),this._preCreate(i),yield n(this._cybersportgameService.create(i)),this.setRows()})})},update:i=>{this._form.modal(this.form,[],i).then(a=>{a.description=a.description||"",a.shortDescription=a.shortDescription||"",a.shortDescription=a.shortDescription.split('<div class="jso-cursor-trail-wrapper')[0],a.description=a.description.split('<div class="jso-cursor-trail-wrapper')[0],this._core.copy(a,i),this._cybersportgameService.update(i)})},delete:i=>{this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this cybersportgame?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>c(this,null,function*(){yield n(this._cybersportgameService.delete(i)),this.setRows()})}]})},buttons:[{icon:"cloud_download",click:i=>{this._form.modalUnique("cybersportgame","url",i)}},{icon:"arrow_upward",click:i=>{let a=this.rows.findIndex(s=>s._id===i._id);a&&(this.rows.splice(a,1),this.rows.splice(a-1,0,i));for(let s=0;s<this.rows.length;s++)this.rows[s].order!==s&&(this.rows[s].order=s,this._cybersportgameService.update(this.rows[s]))}}],headerButtons:[{icon:"playlist_add",click:this._bulkManagement(),class:"playlist"},{icon:"edit_note",click:this._bulkManagement(!1),class:"edit"}]},this.rows=[],this._page=1,this.setRows()}setRows(r=this._page){this._page=r,this._core.afterWhile(this,()=>{this._cybersportgameService.get({page:r}).subscribe(t=>{this.rows.splice(0,this.rows.length),this.rows.push(...t)})},250)}_bulkManagement(r=!0){return()=>{this._form.modalDocs(r?[]:this.rows).then(t=>c(this,null,function*(){if(r)for(let e of t)this._preCreate(e),yield n(this._cybersportgameService.create(e));else{for(let e of this.rows)t.find(o=>o._id===e._id)||(yield n(this._cybersportgameService.delete(e)));for(let e of t){let o=this.rows.find(p=>p._id===e._id);o?(this._core.copy(e,o),yield n(this._cybersportgameService.update(o))):(this._preCreate(e),yield n(this._cybersportgameService.create(e)))}}this.setRows()}))}}_preCreate(r){delete r.__created}static{this.\u0275fac=function(t){return new(t||l)(m(C),m(_),m(g),m(k),m(b))}}static{this.\u0275cmp=f({type:l,selectors:[["ng-component"]],standalone:!1,decls:1,vars:3,consts:[["title","Games",3,"columns","config","rows"]],template:function(t,e){t&1&&y(0,"wtable",0),t&2&&u("columns",e.columns)("config",e.config)("rows",e.rows)},dependencies:[w],encapsulation:2})}}return l})();var M=[{path:"",component:L}],V=(()=>{class l{static{this.\u0275fac=function(t){return new(t||l)}}static{this.\u0275mod=h({type:l})}static{this.\u0275inj=d({imports:[v.forChild(M),P]})}}return l})();export{V as GamesModule};

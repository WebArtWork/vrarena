import{a as Q}from"./chunk-MYCHKJST.js";import{a as Y}from"./chunk-LZ7H2IAM.js";import{e as K}from"./chunk-QVDMXOLA.js";import{$ as V,Db as J,H as w,Ha as F,Ia as $,J as c,La as N,M as f,N as I,O as R,Q as E,R as x,T as d,Va as B,Wa as U,X as i,Y as r,Z as T,Za as q,_ as D,a as y,aa as h,b as P,ba as v,ca as l,db as L,fa as j,ka as n,la as C,ma as b,s as O,sb as A,tb as G,ua as k,va as S,vb as H,wa as z,x as g,y as u}from"./chunk-ML3SWCJJ.js";var X=(()=>{class t{transform(e){if(!e||e.length===0)return"";let a=e.map(s=>s.split(" - ")),o=[a[0]];for(let s=1;s<a.length;s++){let _=o[o.length-1][1],m=a[s][0];_===m?o[o.length-1][1]=a[s][1]:o.push(a[s])}return o.map(s=>s.join(" - ")).join(", ")}static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275pipe=E({name:"times",type:t,pure:!0})}}return t})();function ee(t,p){t&1&&(i(0,"div",15)(1,"div",16),n(2," Common.You don't have reserervations yet "),r()())}function te(t,p){if(t&1){let e=h();i(0,"winput",17),v("wChange",function(o){g(e);let s=l();return u(s.showOldReservations=!!o)}),r()}}function ie(t,p){if(t&1){let e=h();D(0),i(1,"div",27)(2,"i",28),v("click",function(){g(e);let o=l().$implicit,s=l();return o.status="Confirmed",u(s.update(o))}),n(3,"check_circle"),r(),i(4,"i",29),v("click",function(){g(e);let o=l().$implicit,s=l();return o.status="Denied",u(s.update(o))}),n(5,"cancel"),r()(),V()}}function ne(t,p){if(t&1&&(i(0,"div",23)(1,"div",24)(2,"i",6),n(3,"person"),r()(),i(4,"div",25),n(5," \u0406\u043C\u044F: "),i(6,"span"),n(7),r()()()),t&2){let e=l().$implicit;c(7),C(e.name)}}function oe(t,p){if(t&1&&(i(0,"div",23)(1,"div",24)(2,"i",6),n(3,"phone"),r()(),i(4,"div",25),n(5," \u0422\u0435\u043B\u0435\u0444\u043E\u043D: "),i(6,"a",30),n(7),r()()()),t&2){let e=l().$implicit;c(6),j("href","tel:",e.phone,"",w),c(),C(e.phone)}}function re(t,p){t&1&&(i(0,"div",23)(1,"div",24)(2,"i",6),n(3,"sports_esports"),r()(),i(4,"div",25),n(5," \u0413\u0440\u0430: "),i(6,"span"),n(7,"\u041D\u0430\u0437\u0432\u0430 \u0433\u0440\u0438"),r()()())}function ae(t,p){if(t&1){let e=h();i(0,"div",23)(1,"wbutton",31),v("click",function(){g(e);let o=l().$implicit,s=l();return u(s.cancel(o))}),i(2,"span",19),n(3,"Common.Cancel reservation"),r()()()}}function se(t,p){if(t&1&&(i(0,"div",15)(1,"div",18)(2,"span",19),n(3,"Common.Reservation"),r(),i(4,"span",20),n(5," - "),r(),i(6,"span"),n(7),k(8,"translate"),r(),x(9,ie,6,0,"ng-container",21),r(),i(10,"div",22)(11,"div",23)(12,"div",24)(13,"i",6),n(14,"date_range"),r()(),i(15,"div",25),n(16),i(17,"span"),n(18),k(19,"date"),r()()(),i(20,"div",23)(21,"div",24)(22,"i",6),n(23,"hourglass_top"),r()(),i(24,"div",25),n(25," \u0427\u0430\u0441: "),i(26,"span"),n(27),k(28,"times"),r()()(),x(29,ne,8,1,"div",26)(30,oe,8,3,"div",26)(31,re,8,0,"div",26),i(32,"div",23)(33,"div",24)(34,"i",6),n(35,"payments"),r()(),i(36,"div",25),n(37," \u0426\u0456\u043D\u0430: "),i(38,"span"),n(39),r()()(),x(40,ae,4,0,"div",26),r()()),t&2){let e=p.$implicit,a=l();c(7),C(S(8,10,"Status."+e.status)),c(2),d("ngIf",a.isManager&&e.status==="New"),c(7),b(" \u0414\u0430\u0442\u0430: ",e.date," "),c(2),b("",z(19,12,e.date,"dd.MM.yyyy")," "),c(9),C(S(28,15,e.times)),c(2),d("ngIf",a.isManager),c(),d("ngIf",a.isManager),c(),d("ngIf",e.game),c(8),b("",e.times.length*1e3,"\u0433\u0440\u043D"),c(),d("ngIf",e.status==="New")}}var M=(()=>{class t{constructor(e,a,o,s){this._reservationService=e,this.userService=a,this._core=o,this._router=s,this.isManager=this._router.url.includes("manager"),this.reservations=[],this.oldReservations=[],this.showOldReservations=!1,this.isManager?this._reservationService.get({query:`yearmonth=${this._reservationService.yearmonth()}`},{name:"public"}).subscribe(_=>{this.reservations=_.filter(m=>!this._reservationService.isPastDate(m.date)),this.oldReservations=_.filter(m=>this._reservationService.isPastDate(m.date))}):this._reservationService.get({query:`deviceID=${this._core.deviceID}`}).subscribe(_=>{this.reservations=_.filter(m=>!this._reservationService.isPastDate(m.date)),this.oldReservations=_.filter(m=>this._reservationService.isPastDate(m.date))})}update(e){this._reservationService.update(e)}back(){window.history.back()}cancel(e){e.status="Cancelled",this._reservationService.update(P(y({},e),{deviceID:this._core.deviceID}),{name:"cancel"})}static{this.\u0275fac=function(a){return new(a||t)(f(Q),f(Y),f(L),f(B))}}static{this.\u0275cmp=I({type:t,selectors:[["ng-component"]],standalone:!1,decls:17,vars:4,consts:[[1,"documents-wrapper"],[1,"documents-container"],[1,"documents-list"],[1,"documents-header"],[1,"documents-header-left"],[1,"documents-header-left__arrow",3,"click"],[1,"material-icons"],["routerLink","/profile",1,"documents-header-left__avatar"],["alt","",3,"src"],["translate","",1,"documents-header__title"],[1,"documents-main","documents-main--nobar"],[1,"documents-main-content"],["class","documents-main-row",4,"ngIf"],["label","Show old reservations","type","checkbox",3,"wChange",4,"ngIf"],["class","documents-main-row",4,"ngFor","ngForOf"],[1,"documents-main-row"],["translate","",1,"documents__title","bookings-title"],["label","Show old reservations","type","checkbox",3,"wChange"],[1,"documents__title","bookings-title"],["translate",""],[2,"padding-left","5px","padding-right","5px"],[4,"ngIf"],[1,"bookings-list"],[1,"bookings__item"],[1,"bookings__icon"],[1,"bookings__text"],["class","bookings__item",4,"ngIf"],[1,"bookings-title-icons"],[1,"material-icons","green",3,"click"],[1,"material-icons","red",3,"click"],[3,"href"],[3,"click"]],template:function(a,o){a&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),v("click",function(){return o.back()}),i(6,"span",6),n(7,"arrow_back_ios"),r()(),i(8,"div",7),T(9,"img",8),r()(),i(10,"div",9),n(11," Common.Reservations "),r()(),i(12,"div",10)(13,"div",11),x(14,ee,3,0,"div",12)(15,te,1,0,"winput",13)(16,se,41,17,"div",14),r()()()()()),a&2&&(c(9),d("src",o.userService.thumb,w),c(5),d("ngIf",!(o.reservations!=null&&o.reservations.length)),c(),d("ngIf",o.oldReservations.length),c(),d("ngForOf",o.showOldReservations?o.oldReservations:o.reservations))},dependencies:[U,A,F,$,G,H,J,N,X],styles:[".bookings__item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:12px}.bookings__icon[_ngcontent-%COMP%]{display:flex}.bookings__icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{background:linear-gradient(291deg,#c74662 40%,#7251ea 105%);padding:3px;border-radius:4px}.bookings__text[_ngcontent-%COMP%]{padding-left:10px;font-size:20px;color:var(--c-text-primary);font-weight:500}.bookings__text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .bookings__text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--violet);font-weight:600}.bookings-title[_ngcontent-%COMP%]{font-size:24px;border-bottom:1px solid var(--c-text-primary);padding:0;margin-bottom:20px;display:flex;align-items:center}.bookings-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--c-text-primary)}.bookings-title-icons[_ngcontent-%COMP%]{display:flex;margin-left:10px}.bookings-title-icons[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0 5px}.bookings-title-icons[_ngcontent-%COMP%]   .green[_ngcontent-%COMP%]{background:linear-gradient(45deg,#34d399,#059669);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.bookings-title-icons[_ngcontent-%COMP%]   .red[_ngcontent-%COMP%]{background:linear-gradient(45deg,#e33e3e,#b63d3d);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.bookings-winner[_ngcontent-%COMP%]{display:flex;align-items:center;background:linear-gradient(70deg,#c74662 -3.5%,#51daea);padding:5px 12px;width:fit-content;border-radius:5px;margin-left:auto}.bookings-winner__icon[_ngcontent-%COMP%]{display:flex}.bookings-winner__text[_ngcontent-%COMP%]{padding-left:10px;font-size:18px;font-weight:600}@media screen and (max-width: 479px){.bookings-title[_ngcontent-%COMP%]{font-size:18px}.bookings__text[_ngcontent-%COMP%]{font-size:16px}.bookings__text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .bookings__text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:500}.bookings__icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}}"]})}}return t})();var ce=[{path:"",component:M},{path:"manager",component:M}],Me=(()=>{class t{static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275mod=R({type:t})}static{this.\u0275inj=O({imports:[q.forChild(ce),K]})}}return t})();export{Me as ReservationsModule};

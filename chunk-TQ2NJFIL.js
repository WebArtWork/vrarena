import{c as A,e as V}from"./chunk-QVDMXOLA.js";import{Ab as R,Da as M,H as x,J as T,M as r,N as F,O as h,R as k,T as g,X as l,Y as a,Za as S,aa as C,ba as p,ca as y,db as j,f as m,i as d,ib as O,ka as I,ma as D,r as b,rb as E,s as u,v as w,x as f,xb as N,y as _,yb as P}from"./chunk-ML3SWCJJ.js";var B={formId:"file",title:"File",components:[{name:"Photo",key:"path",fields:[{name:"Label",value:"Image"},{name:"Wdith",value:1920},{name:"Height",value:1080}]}]};var v=class{_document;_textarea;constructor(n,e){this._document=e;let t=this._textarea=this._document.createElement("textarea"),o=t.style;o.position="fixed",o.top=o.opacity="0",o.left="-999em",t.setAttribute("aria-hidden","true"),t.value=n,t.readOnly=!0,(this._document.fullscreenElement||this._document.body).appendChild(t)}copy(){let n=this._textarea,e=!1;try{if(n){let t=this._document.activeElement;n.select(),n.setSelectionRange(0,n.value.length),e=this._document.execCommand("copy"),t&&t.focus()}}catch{}return e}destroy(){let n=this._textarea;n&&(n.remove(),this._textarea=void 0)}},$=(()=>{class i{_document=w(M);constructor(){}copy(e){let t=this.beginCopy(e),o=t.copy();return t.destroy(),o}beginCopy(e){return new v(e,this._document)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=b({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function K(i,n){if(i&1){let e=C();l(0,"img",3),p("click",function(){let o=f(e).$implicit,s=y();return _(s.copy(o.url))}),a()}if(i&2){let e=n.$implicit;g("src",e.url,x)}}function W(i,n){if(i&1){let e=C();l(0,"span",4),p("click",function(){let o=f(e).$implicit,s=y();return _(s.copy(o.url))}),I(1),a()}if(i&2){let e=n.$implicit;T(),D(" ",e.url," ")}}var L=(()=>{class i{constructor(e,t,o,s,U,Y){this._translate=e,this._fileService=t,this._clipboard=o,this._alert=s,this._form=U,this._core=Y,this.columns=["img","url"],this.form=this._form.getForm("file",B),this.config={paginate:this.setRows.bind(this),perPage:20,setPerPage:this._fileService.setPerPage.bind(this._fileService),allDocs:!1,create:()=>{this._form.modal(this.form,{label:"Create",click:(c,Z)=>m(this,null,function*(){Z(),this._preCreate(c),yield d(this._fileService.create(c)),this.setRows()})})},delete:c=>{this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this file?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>m(this,null,function*(){yield d(this._fileService.delete(c)),this.setRows()})}]})}},this.rows=[],this._page=1,this.setRows()}copy(e){this._clipboard.copy(e),this._alert.info({text:"Url has been copied"})}setRows(e=this._page){this._page=e,this._core.afterWhile(this,()=>{this._fileService.get({page:e}).subscribe(t=>{this.rows.splice(0,this.rows.length),this.rows.push(...t)})},250)}_preCreate(e){delete e.__created}static{this.\u0275fac=function(t){return new(t||i)(r(E),r(A),r($),r(O),r(R),r(j))}}static{this.\u0275cmp=F({type:i,selectors:[["ng-component"]],standalone:!1,decls:3,vars:3,consts:[["title","Files",3,"columns","config","rows"],["cell","img"],["cell","url"],[2,"height","100px",3,"click","src"],[3,"click"]],template:function(t,o){t&1&&(l(0,"wtable",0),k(1,K,1,1,"ng-template",1)(2,W,2,1,"ng-template",2),a()),t&2&&g("columns",o.columns)("config",o.config)("rows",o.rows)},dependencies:[P,N],encapsulation:2})}}return i})();var q=[{path:"",component:L}],be=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=h({type:i})}static{this.\u0275inj=u({imports:[S.forChild(q),V]})}}return i})();export{be as FilesModule};
